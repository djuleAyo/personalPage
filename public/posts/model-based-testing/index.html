<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Every user flow e2es - model-based testing / state-machine testing · djuleayo
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="djuleayo">
<meta name="description" content="Educating mini brain how to use your app results in automated e2e tests that cover every user flow with minimal effort.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Every user flow e2es - model-based testing / state-machine testing">
  <meta name="twitter:description" content="Educating mini brain how to use your app results in automated e2e tests that cover every user flow with minimal effort.">

<meta property="og:url" content="http://www.example.com/posts/model-based-testing/">
  <meta property="og:site_name" content="djuleayo">
  <meta property="og:title" content="Every user flow e2es - model-based testing / state-machine testing">
  <meta property="og:description" content="Educating mini brain how to use your app results in automated e2e tests that cover every user flow with minimal effort.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-06T14:05:26+02:00">
    <meta property="article:modified_time" content="2025-06-06T14:05:26+02:00">
    <meta property="article:tag" content="E2e">
    <meta property="article:tag" content="Testing">
    <meta property="article:tag" content="Model-Based-Testing">
    <meta property="article:tag" content="State-Machine-Testing">
    <meta property="article:tag" content="Playwright">
    <meta property="article:tag" content="Cypress">




<link rel="canonical" href="http://www.example.com/posts/model-based-testing/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css" integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm&#43;MTzNJdv80k&#43;n0=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://www.example.com/">
      djuleayo
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://www.example.com/posts/model-based-testing/">
              Every user flow e2es - model-based testing / state-machine testing
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2025-06-06T14:05:26&#43;02:00">
                June 6, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/e2e/">E2e</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/testing/">Testing</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/model-based-testing/">Model-Based-Testing</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/state-machine-testing/">State-Machine-Testing</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/playwright/">Playwright</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/cypress/">Cypress</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/test-automation/">Test-Automation</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h2 id="intro">
  Intro
  <a class="heading-link" href="#intro">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>What an exiting and strange time we live in! At the same time
streets are poverty struck resembling void of beauty,
and I can play with miniature special purpose machine brains sitting on
gigantic legacy of modern computing. Words really is battlefront of light and dark. One of such brains can be constructed and used in app testing purposes.</p>
<h1 id="every-user-flow-e2es---model-based-testing--state-machine-testing">
  Every user flow e2es - model-based testing / state-machine testing
  <a class="heading-link" href="#every-user-flow-e2es---model-based-testing--state-machine-testing">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>is end boss dream of e2e testing. Covering every user flow is implementationally
demanding. On top of it Teams claim e2es are demanding to maintain. So they opt out.
Interestingly solution lies, as its often case in life, there where we don&rsquo;t
want to look at.</p>
<p>With right code organization &ldquo;every user flow&rdquo; e2e testing is achievable
and maintainable for almost the same effort as &ldquo;some user flows&rdquo; e2e testing.</p>
<p>It&rsquo;s very obvious why would you want it, so let&rsquo;s dig straight into how.</p>
<h2 id="setup">
  Setup
  <a class="heading-link" href="#setup">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The solution lies in graphs. Lack of general purpose graph libraries is the best
tell how taboo graphs are. Yet anything done smart requires a graph. It is
after all what powers AI as well. Enough introduction lets define a graph
structure that will allow us to cover every user flow with effort
comparable if not less than &ldquo;some user flows&rdquo;.</p>
<blockquote>
<p>UI state is node of the graph. (page, modal, panel - anything that requires user interaction)</p></blockquote>
<blockquote>
<p>User interaction needed to translate from one state to another is an edge of the graph.</p></blockquote>
<p>Idea is very simple in fact. If you know about graphs. As soon as you have
this graph you can traverse it in automated way! Thats the whole point.
UI state/interaction graph is allowing automated traversal and each traversal
is a user flow - aka e2e test.</p>
<p>So test are generated from the graph with given parameters.
No parameters = shortest path.
If you want to go real fancy, real analytics data can be used as edge cost.
This way tests can reflect real user behavior and be more realistic.
But for now lets not go deep into traversal control.</p>
<h2 id="user-interaction-library">
  User interaction library
  <a class="heading-link" href="#user-interaction-library">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>No matter what you are testing
if you are at home page and want to open a menu, same user interaction is used.</p>
<blockquote>
<p>User interaction library is defining set of edges</p></blockquote>
<p>this promotes</p>
<ul>
<li>reusability</li>
<li>maintainability</li>
<li>automation</li>
</ul>
<p>Reasons why setting up &ldquo;every user flow&rdquo; doesn&rsquo;t cost much more than &ldquo;some user flows&rdquo;.
Or even less.</p>
<h2 id="assertions">
  Assertions
  <a class="heading-link" href="#assertions">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Content assertions can be used to verify if components are rendered correctly.
But this is sort of &ldquo;glorified unit test&rdquo; disguised as e2e test.</p>
<ul>
<li>e2es mimic user behavior</li>
<li>user has no clue what should render</li>
<li>he knows if data he needs is there</li>
<li>if things glow green or red - do they work</li>
</ul>
<p>In e2e tests assertions can be split into intent libraries:</p>
<p>One is to recognize the state of the UI.
Another is to extract data from the UI.</p>
<h3 id="recognizers">
  Recognizers
  <a class="heading-link" href="#recognizers">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Recognizers search for unique piece of UI to declare UI state.</p>
<p>Now we see we in fact have two graphs! One is static - described so far.
It is a prescription of how to use the app. But app has states so not all
prescriptions are valid at all times. Meaning we must construct dynamic graph
that represents actual state of the app. This graph can be populated via recognizers.</p>
<p>Obviously these are also independent of the actual test goal. Fully reusable.</p>
<h2 id="alternative-jargon--beginner-friendliness">
  Alternative jargon / beginner friendliness
  <a class="heading-link" href="#alternative-jargon--beginner-friendliness">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Graphs are, practice shows, a bit scary. So lets introduce less technical jargon</p>
<p>static graph is experienced user. Experienced user knows how to
do stuff in the app. Graph is a brain of a user.
Dynamic graph is new user asking for advice how to do something in the app
from experienced user.</p>
<p>Once initial effort to setup graph traversals is done, devs write regular
user interaction and assertions as they would otherwise laying them out in
a set framework that defines the graph. Testing is then just declaring desired
outcome (node/ui state ie something purchased) and giving required data. Test is generated</p>
<h2 id="extractors">
  Extractors
  <a class="heading-link" href="#extractors">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Should be seen as &ldquo;data extractors&rdquo; - each component has an extractor that
reads the data from the UI and then that data can be compared in automatic and
dynamic manner leading into existing runtime validators of the app.
Especially if <code>zod</code> is used. This once again allows to do more with less writing.
Extractors are independent of the actual test goal. Reusable.</p>
<h2 id="independence-test">
  Independence test
  <a class="heading-link" href="#independence-test">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>If we look at the backend as a black box, we do not know if its stateless,
stateful, or has some other state management. And we do not care.
By assigning weights to edges, possibly based on analytics data,
tests can have budgets and traverse in suboptimal ways. IE they can loop
purchasing multiple times. In such scenario user flows should still work.
Implicitly this is testing the backend for independence of implementation
with respect to growing state.</p>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "djuleayo" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2025
     djuleayo 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  <script defer data-domain="djuleayo.com" src="https://plausible.io/js/script.js"></script>

</body>
</html>
